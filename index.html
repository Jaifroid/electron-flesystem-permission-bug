<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'">
    <link href="./styles.css" rel="stylesheet">
    <script type="module" src="./renderer.js"></script>
    <title>File System API Regression Test</title>
  </head>
  <body>
    <h1>File System API Regression Test</h1>
    <p>
      Instructions: Ensure you run this test in <b>Electron</b> or in a <b>Chromium-based</b> browser (e.g. Chrome, Edge).
    </p>
    <p>
      Hit the button to choose a directory.  It must not be a 'special' directory,
      such as your documents or downloads folder.  Make a new folder if in doubt.
    </p>
    <p>
      You should see your directory name, and it should say 'granted' in green for writable
      status.  Now, close the app and run it again.  Your directory should still
      be there, and it should still say 'granted' if the test has passed and persistent permissions
      have been granted by the user.
    </p>
    <p>
      If it says 'prompt' with a security error in red informing you that user activation is required (a click, for example).
      If this happens in <b>Browser context</b>, then try picking the folder again, until the Browser prompts you to grant
      persistent permissions (may need two tries, restarting the app in-between).
    </p>
    <p>
      In <b>Electron context</b>, no prompt is ever shown to the user by default, and there is currently no way to override
      the need for user activation.
    </p>

    <button data-action="setDir">Choose Directory</button>
    <hr/>
    <p>
      Directory: <span class="dir"></span><br/>
      Writable: <span class="writable"></span>
    </p>
    <footer>
      Node.js <span id="node-version"></span>,
      Chromium <span id="chrome-version"></span>,
      Electron <span id="electron-version"></span>
    </footer>
  </body>
</html>
